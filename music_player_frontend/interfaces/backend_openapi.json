{"openapi":"3.1.0","info":{"title":"Music Player Backend API","description":"Backend for a personal music library.\n\nAuthentication: none (public API)\n\nStreaming:\n- GET /songs/{song_id}/stream is public and supports range requests for efficient playback.","version":"2.0.0"},"paths":{"/songs":{"get":{"tags":["Songs"],"summary":"List all songs","description":"Returns all songs in the library, newest first.","operationId":"list_songs","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SongResponse"},"type":"array","title":"Response List Songs"}}}}}}},"/songs/upload":{"post":{"tags":["Songs"],"summary":"Upload an mp3","description":"Uploads an mp3 file. Stores file on disk and metadata in DB.","operationId":"upload_song","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_song"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SongUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/songs/{song_id}/stream":{"get":{"tags":["Songs"],"summary":"Stream a song","description":"Streams the mp3 file (public).","operationId":"stream_song","parameters":[{"name":"song_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Song Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}},"audio/mpeg":{}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["Health"],"summary":"Health check","description":"Simple health check endpoint.","operationId":"health_check__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_upload_song":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"MP3 file upload (multipart/form-data)"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","description":"Optional title. Defaults to original filename stem."},"artist":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Artist","description":"Optional artist. Defaults to 'Unknown Artist'."}},"type":"object","required":["file"],"title":"Body_upload_song"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"SongResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"Song UUID."},"title":{"type":"string","title":"Title","description":"Song title."},"artist":{"type":"string","title":"Artist","description":"Song artist."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Creation timestamp."},"size_bytes":{"type":"integer","title":"Size Bytes","description":"File size in bytes."},"content_type":{"type":"string","title":"Content Type","description":"Content type stored at upload time."}},"type":"object","required":["id","title","artist","created_at","size_bytes","content_type"],"title":"SongResponse"},"SongUploadResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"Created song UUID."},"title":{"type":"string","title":"Title","description":"Song title."},"artist":{"type":"string","title":"Artist","description":"Song artist."},"filename":{"type":"string","title":"Filename","description":"Stored filename (server-side)."},"content_type":{"type":"string","title":"Content Type","description":"Uploaded content type."},"size_bytes":{"type":"integer","title":"Size Bytes","description":"Size in bytes."},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds","description":"Duration in seconds if known."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Creation timestamp."}},"type":"object","required":["id","title","artist","filename","content_type","size_bytes","created_at"],"title":"SongUploadResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}},"tags":[{"name":"Songs","description":"Upload, list, and stream mp3 files (public)."},{"name":"Health","description":"Service health and basic runtime info."}]}